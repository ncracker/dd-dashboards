{
   "title":"AWS CodeBuild - DD Example",
   "description":"",
   "widgets":[
      {
         "id":879106878888800,
         "layout":{
            "x":0,
            "y":0,
            "width":24,
            "height":16
         },
         "definition":{
            "type":"image",
            "url":"https://www.cloudaxis.com/wp-content/uploads/2018/09/codebuild.png",
            "sizing":"fit"
         }
      },
      {
         "id":2010277826887464,
         "layout":{
            "x":0,
            "y":17,
            "width":24,
            "height":9
         },
         "definition":{
            "title":"Total Builds",
            "title_size":"16",
            "title_align":"left",
            "type":"query_value",
            "requests":[
               {
                  "q":"sum:aws.codebuild.builds{$Project,$Namespace,$ENV}.as_count()",
                  "aggregator":"sum"
               }
            ],
            "autoscale":true,
            "text_align":"center",
            "precision":1
         }
      },
      {
         "id":6379574847344408,
         "layout":{
            "x":25,
            "y":0,
            "width":48,
            "height":26
         },
         "definition":{
            "title":"Total Builds",
            "title_size":"16",
            "title_align":"left",
            "show_legend":false,
            "legend_layout":"auto",
            "legend_columns":[
               "avg",
               "min",
               "max",
               "value",
               "sum"
            ],
            "type":"timeseries",
            "requests":[
               {
                  "q":"sum:aws.codebuild.builds{$Project,$Namespace,$ENV} by {namespace,projectname,env}.as_count()",
                  "on_right_yaxis":false,
                  "style":{
                     "palette":"dog_classic",
                     "line_type":"solid",
                     "line_width":"normal"
                  },
                  "display_type":"bars"
               }
            ],
            "yaxis":{
               "scale":"linear",
               "label":"",
               "include_zero":true,
               "min":"auto",
               "max":"auto"
            },
            "markers":[
               
            ]
         }
      },
      {
         "id":7595203543930374,
         "layout":{
            "x":25,
            "y":27,
            "width":48,
            "height":19
         },
         "definition":{
            "title":"Failed Builds (Top10)",
            "title_size":"16",
            "title_align":"left",
            "type":"query_table",
            "requests":[
               {
                  "aggregator":"avg",
                  "conditional_formats":[
                     {
                        "comparator":">",
                        "palette":"white_on_yellow",
                        "value":0
                     },
                     {
                        "comparator":">",
                        "palette":"white_on_red",
                        "value":10
                     }
                  ],
                  "q":"top(sum:aws.codebuild.failed_builds{$Project,$Namespace,$ENV} by {namespace,projectname,env}.as_count(), 10, 'mean', 'desc')",
                  "alias":"Failures",
                  "limit":10,
                  "order":"desc"
               }
            ]
         }
      },
      {
         "id":1391100138920240,
         "layout":{
            "x":0,
            "y":27,
            "width":24,
            "height":9
         },
         "definition":{
            "title":"Successful Builds",
            "title_size":"16",
            "title_align":"left",
            "type":"query_value",
            "requests":[
               {
                  "q":"sum:aws.codebuild.succeeded_builds{$Project,$Namespace,$ENV}.as_count()",
                  "aggregator":"sum",
                  "conditional_formats":[
                     {
                        "comparator":">",
                        "palette":"white_on_green",
                        "value":0
                     }
                  ]
               }
            ],
            "autoscale":true,
            "text_align":"center",
            "precision":1
         }
      },
      {
         "id":6048190537579748,
         "layout":{
            "x":0,
            "y":37,
            "width":24,
            "height":9
         },
         "definition":{
            "title":"Failed Builds",
            "title_size":"16",
            "title_align":"left",
            "type":"query_value",
            "requests":[
               {
                  "q":"sum:aws.codebuild.failed_builds{$Project,$Namespace,$ENV}.as_count()",
                  "aggregator":"sum",
                  "conditional_formats":[
                     {
                        "comparator":"<=",
                        "palette":"white_on_green",
                        "value":0
                     },
                     {
                        "comparator":">",
                        "palette":"white_on_red",
                        "value":0
                     }
                  ]
               }
            ],
            "autoscale":true,
            "text_align":"center",
            "precision":1
         }
      },
      {
         "id":5362473323564864,
         "layout":{
            "x":74,
            "y":0,
            "width":17,
            "height":9
         },
         "definition":{
            "title":"AVG Build Duration",
            "title_size":"16",
            "title_align":"left",
            "type":"query_value",
            "requests":[
               {
                  "q":"avg:aws.codebuild.duration{$Project,$Namespace,$ENV}",
                  "aggregator":"avg",
                  "conditional_formats":[
                     {
                        "comparator":"<",
                        "palette":"white_on_green",
                        "value":60
                     },
                     {
                        "comparator":">",
                        "palette":"white_on_yellow",
                        "value":180
                     },
                     {
                        "comparator":">",
                        "palette":"white_on_red",
                        "value":300
                     }
                  ]
               }
            ],
            "autoscale":false,
            "precision":0
         }
      },
      {
         "id":3062812178776468,
         "layout":{
            "x":74,
            "y":10,
            "width":53,
            "height":16
         },
         "definition":{
            "title":"Build phases duration",
            "title_size":"16",
            "title_align":"left",
            "show_legend":false,
            "legend_layout":"horizontal",
            "legend_columns":[
               "avg",
               "min",
               "max",
               "value",
               "sum"
            ],
            "type":"timeseries",
            "requests":[
               {
                  "q":"avg:aws.codebuild.submitted_duration{$Project,$Namespace,$ENV}, avg:aws.codebuild.provisioning_duration{$Project,$Namespace,$ENV}, avg:aws.codebuild.download_source_duration{$Project,$Namespace,$ENV}, avg:aws.codebuild.install_duration{$Project,$Namespace,$ENV}, avg:aws.codebuild.pre_build_duration{$Project,$Namespace,$ENV}, avg:aws.codebuild.build_duration{$Project,$Namespace,$ENV}, avg:aws.codebuild.post_build_duration{$Project,$Namespace,$ENV}, avg:aws.codebuild.upload_artifacts_duration{$Project,$Namespace,$ENV}",
                  "on_right_yaxis":false,
                  "metadata":[
                     {
                        "expression":"avg:aws.codebuild.submitted_duration{*}",
                        "alias_name":"Submitted"
                     },
                     {
                        "expression":"avg:aws.codebuild.provisioning_duration{*}",
                        "alias_name":"Provisioning"
                     },
                     {
                        "expression":"avg:aws.codebuild.download_source_duration{*}",
                        "alias_name":"Download Source"
                     },
                     {
                        "expression":"avg:aws.codebuild.install_duration{*}",
                        "alias_name":"Install"
                     },
                     {
                        "expression":"avg:aws.codebuild.pre_build_duration{*}",
                        "alias_name":"Pre Build"
                     },
                     {
                        "expression":"avg:aws.codebuild.build_duration{*}",
                        "alias_name":"Build"
                     },
                     {
                        "expression":"avg:aws.codebuild.post_build_duration{*}",
                        "alias_name":"Post Build"
                     },
                     {
                        "expression":"avg:aws.codebuild.upload_artifacts_duration{*}",
                        "alias_name":"Upload"
                     }
                  ],
                  "style":{
                     "palette":"pride",
                     "line_type":"solid",
                     "line_width":"normal"
                  },
                  "display_type":"bars"
               }
            ],
            "yaxis":{
               "scale":"linear",
               "label":"",
               "include_zero":true,
               "min":"auto",
               "max":"auto"
            },
            "markers":[
               
            ]
         }
      },
      {
         "id":138760168820842,
         "layout":{
            "x":110,
            "y":0,
            "width":17,
            "height":9
         },
         "definition":{
            "title":"AVG Pre+Post Duration",
            "title_size":"16",
            "title_align":"left",
            "type":"query_value",
            "requests":[
               {
                  "q":"avg:aws.codebuild.pre_build_duration{$Project,$Namespace,$ENV}+avg:aws.codebuild.post_build_duration{$Project,$Namespace,$ENV}",
                  "aggregator":"avg",
                  "conditional_formats":[
                     {
                        "comparator":"<",
                        "palette":"white_on_green",
                        "value":30
                     },
                     {
                        "comparator":">",
                        "palette":"white_on_yellow",
                        "value":30
                     },
                     {
                        "comparator":">",
                        "palette":"white_on_red",
                        "value":60
                     }
                  ]
               }
            ],
            "autoscale":false,
            "precision":0
         }
      },
      {
         "id":4603618814130752,
         "layout":{
            "x":92,
            "y":0,
            "width":17,
            "height":9
         },
         "definition":{
            "title":"AVG Provisioning Duration",
            "title_size":"16",
            "title_align":"left",
            "type":"query_value",
            "requests":[
               {
                  "q":"avg:aws.codebuild.provisioning_duration{$Project,$Namespace,$ENV}",
                  "aggregator":"avg",
                  "conditional_formats":[
                     {
                        "comparator":"<",
                        "palette":"white_on_green",
                        "value":60
                     },
                     {
                        "comparator":">",
                        "palette":"white_on_yellow",
                        "value":60
                     },
                     {
                        "comparator":">",
                        "palette":"white_on_red",
                        "value":120
                     }
                  ]
               }
            ],
            "autoscale":false,
            "precision":0
         }
      },
      {
         "id":4098887054950706,
         "layout":{
            "x":74,
            "y":27,
            "width":53,
            "height":19
         },
         "definition":{
            "title":"Build duration (Top 10)",
            "title_size":"16",
            "title_align":"left",
            "type":"query_table",
            "requests":[
               {
                  "q":"avg:aws.codebuild.build_duration{$Project,$Namespace,$ENV} by {env,namespace,projectname}",
                  "alias":"Duration",
                  "limit":10,
                  "order":"desc",
                  "aggregator":"avg"
               }
            ]
         }
      },
      {
         "id":1504757474031258,
         "layout":{
            "x":25,
            "y":47,
            "width":48,
            "height":19
         },
         "definition":{
            "title":"Build CPU % Utilized (Top10)",
            "title_size":"16",
            "title_align":"left",
            "time":{
               
            },
            "type":"query_table",
            "requests":[
               {
                  "q":"avg:aws.codebuild.cpuutilized_percent{$Project,$Namespace,$ENV} by {env, namespace, projectname, buildnumber}",
                  "alias":"CPU %",
                  "aggregator":"avg",
                  "limit":10,
                  "order":"desc"
               }
            ]
         }
      },
      {
         "id":1456685866736730,
         "layout":{
            "x":74,
            "y":47,
            "width":53,
            "height":19
         },
         "definition":{
            "title":"Build Memory % Utilized  (Top10)",
            "title_size":"16",
            "title_align":"left",
            "time":{
               
            },
            "type":"query_table",
            "requests":[
               {
                  "q":"avg:aws.codebuild.memory_utilized_percent{$Project,$Namespace,$ENV} by {env, namespace, projectname, buildnumber}",
                  "alias":"Memory %",
                  "aggregator":"avg",
                  "limit":10,
                  "order":"desc"
               }
            ]
         }
      },
      {
         "id":3576189462941448,
         "layout":{
            "x":0,
            "y":47,
            "width":24,
            "height":9
         },
         "definition":{
            "title":"CPU units",
            "title_size":"16",
            "title_align":"left",
            "time":{
               
            },
            "type":"query_value",
            "requests":[
               {
                  "q":"sum:aws.codebuild.cpuutilized{$Project,$Namespace,$ENV}",
                  "aggregator":"sum",
                  "conditional_formats":[
                     {
                        "comparator":"<=",
                        "palette":"white_on_green",
                        "value":0
                     },
                     {
                        "comparator":">",
                        "palette":"white_on_red",
                        "value":0
                     }
                  ]
               }
            ],
            "autoscale":true,
            "text_align":"center",
            "precision":0
         }
      },
      {
         "id":2732961424486330,
         "layout":{
            "x":0,
            "y":57,
            "width":24,
            "height":9
         },
         "definition":{
            "title":"Failed Builds",
            "title_size":"16",
            "title_align":"left",
            "time":{
               
            },
            "type":"query_value",
            "requests":[
               {
                  "q":"sum:aws.codebuild.memory_utilized{$Project,$Namespace,$ENV}",
                  "aggregator":"sum",
                  "conditional_formats":[
                     {
                        "comparator":"<=",
                        "palette":"white_on_green",
                        "value":0
                     },
                     {
                        "comparator":">",
                        "palette":"white_on_red",
                        "value":0
                     }
                  ]
               }
            ],
            "autoscale":false,
            "custom_unit":"MBs",
            "text_align":"center",
            "precision":0
         }
      }
   ],
   "template_variables":[
      {
         "name":"ENV",
         "default":"*",
         "prefix":"env"
      },
      {
         "name":"Namespace",
         "default":"*",
         "prefix":"namespace"
      },
      {
         "name":"Project",
         "default":"*",
         "prefix":"projectname"
      }
   ],
   "layout_type":"free",
   "is_read_only":false,
   "notify_list":[
      
   ],
   "id":"gdv-hqq-85c"
}
